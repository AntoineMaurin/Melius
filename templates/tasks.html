{% extends 'base.html' %}
{% load static %}

{% load crispy_forms_tags %}

{% block title %}Tâches{% endblock title %}

{% block body_class %}baloo-font{% endblock body_class %}

{% block main_content %}
<div class="sidebar py-2">
  <div class="mt-3">
    <a href="#" class="sidebar-elt"><i class="fas fa-tachometer-alt"></i></a>
    <a href="/tasks" class="sidebar-elt"><i class="fas fa-check-square"></i></a>
    <a href="#" class="sidebar-elt"><i class="fas fa-th-large"></i></a>
    <a href="#" class="sidebar-elt"><i class="fas fa-columns"></i></a>
    <a href="#" class="sidebar-elt"><i class="fas fa-hourglass-start"></i></a>
    <a href="#" class="sidebar-elt"><i class="fas fa-stopwatch"></i></a>
    <a href="#" class="sidebar-elt"><i class="far fa-calendar-alt"></i></a>
    <a href="#" class="sidebar-elt"><i class="fas fa-meteor"></i></a>
  </div>
</div>

<div class="row header">
  <div class="col-1"></div>
  <div class="col text-center">
    <h2 class="beautiful-title text-darkblue">Melius</h2>
  </div>
  <div class="col-1 float-right my-3">
    <a href="/logout">
      <i class="fas fa-sign-out-alt fa-3x text-darkblue"></i>
    </a>
  </div>
</div>

<div class="row mt-3">
  <section class="col container tasks ml-5 pl-5">
    <form class="py-3 border" action="/show_tasklist" method="post">
      {% csrf_token %}
      <div class="row categories ml-2">
      {% for tasklist in all_tasklists %}
        <div class="form-check form-check-inline">
          <input type="radio" class="form-check-input" autocomplete="off" id="{{ tasklist.id }}" name="tasklist" value="{{ tasklist.id }}" required="true" >
          <label for="{{ tasklist.name }}" class="form-check-label">{{ tasklist.name }}</label>
        </div>
      {% endfor %}
      </div>
      <div class="row ml-2 mt-2 dropdown-content">
        <div class="col-12 ml-3">
          <input type="radio" class="form-check-input" autocomplete="off" id="all_tasks" name="type_sort" value="all">
          <label for="all_tasks_option" class="form-check-label">Toutes les tâches</label>
        </div>
        <div class="col-12 ml-3">
          <input type="radio" class="form-check-input" autocomplete="off" id="current_tasks" name="type_sort" value="current">
          <label for="current_tasks_option" class="form-check-label">Tâches en cours</label>
        </div>
        <div class="col-12 ml-3">
          <input type="radio" class="form-check-input" autocomplete="off" id="finished_tasks" name="type_sort" value="finished">
          <label for="finished_tasks_option" class="form-check-label">Tâches terminées</label>
        </div>
      </div>
    <button type="submit" class="sort-submit-button text-white mt-2">Trier</button>
    </form>

    <div class="mt-2 font-18">
      {% if overdue_tasks %}
        {% include "tasks_list_per_due_date/overdue_tasks.html" %}
      {% endif %}

      {% if due_today_tasks %}
        {% include "tasks_list_per_due_date/due_today_tasks.html" %}
      {% endif %}

      {% if due_tommorow_tasks %}
        {% include "tasks_list_per_due_date/due_tomorrow_tasks.html" %}
      {% endif %}

      {% if future_tasks %}
        {% include "tasks_list_per_due_date/future_tasks.html" %}
      {% endif %}

      {% if no_date_tasks %}
        {% include "tasks_list_per_due_date/no_date_tasks.html" %}
      {% endif %}

      {% if finished_tasks %}
        {% include "tasks_list_per_due_date/finished_tasks.html" %}
      {% endif %}
    </div>
  </section>

  <section class="col container mr-3">
    <div class="border w-100 font-18">
      {% if current_updating_task %}
        {% include "tasks_forms/edit_task_form.html" %}
      {% else %}
        {% include "tasks_forms/new_task_form.html" %}
      {% endif %}
    </div>
  </section>

  {% include "tasks_forms/new_tasklist_form.html" %}

</div>
{% endblock main_content %}
